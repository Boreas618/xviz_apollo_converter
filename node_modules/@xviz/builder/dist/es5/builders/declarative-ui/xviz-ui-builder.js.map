{"version":3,"file":"xviz-ui-builder.js","names":["defaultValidateWarn","console","warn","defaultValidateError","error","UI_BUILDER_MAP","panel","XVIZPanelBuilder","container","XVIZContainerBuilder","metric","XVIZMetricBuilder","plot","XVIZPlotBuilder","select","XVIZSelectBuilder","table","XVIZTableBuilder","treetable","XVIZTreeTableBuilder","video","XVIZVideoBuilder","XVIZUIBuilder","options","_validateWarn","validateWarn","_validateError","validateError","_children","Object","keys","map","type","camelType","snakeToCamel","props","_createUIBuilder","reduce","ui","child","childConfig","getUI","name","push","root"],"sources":["../../../../src/builders/declarative-ui/xviz-ui-builder.js"],"sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* global console */\n/* eslint-disable no-console */\nimport XVIZPanelBuilder from './xviz-panel-builder';\n\nimport XVIZContainerBuilder from './xviz-container-builder';\n\nimport XVIZMetricBuilder from './xviz-metric-builder';\nimport XVIZPlotBuilder from './xviz-plot-builder';\nimport XVIZSelectBuilder from './xviz-select-builder';\nimport XVIZTableBuilder from './xviz-table-builder';\nimport XVIZTreeTableBuilder from './xviz-tree-table-builder';\nimport XVIZVideoBuilder from './xviz-video-builder';\n\nimport {snakeToCamel} from './utils';\n\nconst defaultValidateWarn = console.warn;\nconst defaultValidateError = console.error;\n\n// Should be kept in sync with UI_TYPES in constants.js\nconst UI_BUILDER_MAP = {\n  panel: XVIZPanelBuilder,\n\n  container: XVIZContainerBuilder,\n\n  metric: XVIZMetricBuilder,\n  plot: XVIZPlotBuilder,\n  select: XVIZSelectBuilder,\n  table: XVIZTableBuilder,\n  treetable: XVIZTreeTableBuilder,\n  video: XVIZVideoBuilder\n};\n\nexport default class XVIZUIBuilder {\n  constructor(options = {}) {\n    this._validateWarn = options.validateWarn || defaultValidateWarn;\n    this._validateError = options.validateError || defaultValidateError;\n\n    this._children = [];\n\n    Object.keys(UI_BUILDER_MAP).map(type => {\n      // add UI builders, e.g.\n      // type `panel`\n      //  - this.panel = (props) => this._setChild('panel', props);\n      const camelType = snakeToCamel(type);\n      this[camelType] = props => {\n        return this._createUIBuilder(type, props);\n      };\n    });\n  }\n\n  getUI() {\n    return this._children.reduce((ui, child) => {\n      const childConfig = child.getUI();\n      ui[childConfig.name] = childConfig;\n      return ui;\n    }, {});\n  }\n\n  child(child) {\n    if (!(child instanceof XVIZPanelBuilder)) {\n      this._validateError('Top level UI element should be `Panel`');\n    }\n    this._children.push(child);\n    return child;\n  }\n\n  _createUIBuilder(type, props) {\n    return new UI_BUILDER_MAP[type]({\n      ...props,\n      validateWarn: this._validateWarn,\n      validateError: this._validateError,\n      root: this\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAgBA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;AAEA,IAAMA,mBAAmB,GAAGC,OAAO,CAACC,IAApC;AACA,IAAMC,oBAAoB,GAAGF,OAAO,CAACG,KAArC;AAGA,IAAMC,cAAc,GAAG;EACrBC,KAAK,EAAEC,4BADc;EAGrBC,SAAS,EAAEC,gCAHU;EAKrBC,MAAM,EAAEC,6BALa;EAMrBC,IAAI,EAAEC,2BANe;EAOrBC,MAAM,EAAEC,6BAPa;EAQrBC,KAAK,EAAEC,4BARc;EASrBC,SAAS,EAAEC,gCATU;EAUrBC,KAAK,EAAEC;AAVc,CAAvB;;IAaqBC,a;EACnB,yBAA0B;IAAA;;IAAA,IAAdC,OAAc,uEAAJ,EAAI;IAAA;IACxB,KAAKC,aAAL,GAAqBD,OAAO,CAACE,YAAR,IAAwBzB,mBAA7C;IACA,KAAK0B,cAAL,GAAsBH,OAAO,CAACI,aAAR,IAAyBxB,oBAA/C;IAEA,KAAKyB,SAAL,GAAiB,EAAjB;IAEAC,MAAM,CAACC,IAAP,CAAYzB,cAAZ,EAA4B0B,GAA5B,CAAgC,UAAAC,IAAI,EAAI;MAItC,IAAMC,SAAS,GAAG,IAAAC,mBAAA,EAAaF,IAAb,CAAlB;;MACA,KAAI,CAACC,SAAD,CAAJ,GAAkB,UAAAE,KAAK,EAAI;QACzB,OAAO,KAAI,CAACC,gBAAL,CAAsBJ,IAAtB,EAA4BG,KAA5B,CAAP;MACD,CAFD;IAGD,CARD;EASD;;;;WAED,iBAAQ;MACN,OAAO,KAAKP,SAAL,CAAeS,MAAf,CAAsB,UAACC,EAAD,EAAKC,KAAL,EAAe;QAC1C,IAAMC,WAAW,GAAGD,KAAK,CAACE,KAAN,EAApB;QACAH,EAAE,CAACE,WAAW,CAACE,IAAb,CAAF,GAAuBF,WAAvB;QACA,OAAOF,EAAP;MACD,CAJM,EAIJ,EAJI,CAAP;IAKD;;;WAED,eAAMC,MAAN,EAAa;MACX,IAAI,EAAEA,MAAK,YAAYhC,4BAAnB,CAAJ,EAA0C;QACxC,KAAKmB,cAAL,CAAoB,wCAApB;MACD;;MACD,KAAKE,SAAL,CAAee,IAAf,CAAoBJ,MAApB;;MACA,OAAOA,MAAP;IACD;;;WAED,0BAAiBP,IAAjB,EAAuBG,KAAvB,EAA8B;MAC5B,OAAO,IAAI9B,cAAc,CAAC2B,IAAD,CAAlB,iCACFG,KADE;QAELV,YAAY,EAAE,KAAKD,aAFd;QAGLG,aAAa,EAAE,KAAKD,cAHf;QAILkB,IAAI,EAAE;MAJD,GAAP;IAMD"}