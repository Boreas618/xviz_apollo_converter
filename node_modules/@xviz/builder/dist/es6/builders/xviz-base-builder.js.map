{"version":3,"file":"xviz-base-builder.js","names":["XVIZBaseBuilder","constructor","validator","category","metadata","_streamId","_category","_metadata","_validator","stream","streamId","_flush","getStreamId","getCategory","getMetadata","Error","_reset","_validate","hasProp","matchMetadata","validateWarn","msg","warn","validateError","error","validatePropSetOnce","prop","propSetOnce"],"sources":["../../../src/builders/xviz-base-builder.js"],"sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* XVIZBaseBuilder provides validation and category information\n * shared across all builders.\n */\nexport default class XVIZBaseBuilder {\n  constructor({validator, category, metadata}) {\n    this._streamId = null;\n    this._category = category;\n    this._metadata = metadata;\n\n    this._validator = validator;\n  }\n\n  stream(streamId) {\n    if (this._streamId) {\n      this._flush();\n    }\n\n    this._streamId = streamId;\n    return this;\n  }\n\n  getStreamId() {\n    return this._streamId;\n  }\n\n  getCategory() {\n    return this._category;\n  }\n\n  getMetadata() {\n    return this._metadata;\n  }\n\n  _flush() {\n    throw new Error('Derived class must implement the \"_flush()\" method.');\n  }\n\n  _reset() {\n    this._category = null;\n  }\n\n  _validate() {\n    this._validator.hasProp(this, '_streamId');\n    this._validator.hasProp(this, '_category');\n    this._validator.matchMetadata(this);\n  }\n\n  validateWarn(msg) {\n    this._validator.warn(msg);\n  }\n\n  validateError(msg) {\n    this._validator.error(msg);\n  }\n\n  validatePropSetOnce(prop) {\n    this._validator.propSetOnce(this, prop);\n  }\n}\n"],"mappings":"AAiBA,eAAe,MAAMA,eAAN,CAAsB;EACnCC,WAAW,OAAkC;IAAA,IAAjC;MAACC,SAAD;MAAYC,QAAZ;MAAsBC;IAAtB,CAAiC;IAC3C,KAAKC,SAAL,GAAiB,IAAjB;IACA,KAAKC,SAAL,GAAiBH,QAAjB;IACA,KAAKI,SAAL,GAAiBH,QAAjB;IAEA,KAAKI,UAAL,GAAkBN,SAAlB;EACD;;EAEDO,MAAM,CAACC,QAAD,EAAW;IACf,IAAI,KAAKL,SAAT,EAAoB;MAClB,KAAKM,MAAL;IACD;;IAED,KAAKN,SAAL,GAAiBK,QAAjB;IACA,OAAO,IAAP;EACD;;EAEDE,WAAW,GAAG;IACZ,OAAO,KAAKP,SAAZ;EACD;;EAEDQ,WAAW,GAAG;IACZ,OAAO,KAAKP,SAAZ;EACD;;EAEDQ,WAAW,GAAG;IACZ,OAAO,KAAKP,SAAZ;EACD;;EAEDI,MAAM,GAAG;IACP,MAAM,IAAII,KAAJ,CAAU,qDAAV,CAAN;EACD;;EAEDC,MAAM,GAAG;IACP,KAAKV,SAAL,GAAiB,IAAjB;EACD;;EAEDW,SAAS,GAAG;IACV,KAAKT,UAAL,CAAgBU,OAAhB,CAAwB,IAAxB,EAA8B,WAA9B;;IACA,KAAKV,UAAL,CAAgBU,OAAhB,CAAwB,IAAxB,EAA8B,WAA9B;;IACA,KAAKV,UAAL,CAAgBW,aAAhB,CAA8B,IAA9B;EACD;;EAEDC,YAAY,CAACC,GAAD,EAAM;IAChB,KAAKb,UAAL,CAAgBc,IAAhB,CAAqBD,GAArB;EACD;;EAEDE,aAAa,CAACF,GAAD,EAAM;IACjB,KAAKb,UAAL,CAAgBgB,KAAhB,CAAsBH,GAAtB;EACD;;EAEDI,mBAAmB,CAACC,IAAD,EAAO;IACxB,KAAKlB,UAAL,CAAgBmB,WAAhB,CAA4B,IAA5B,EAAkCD,IAAlC;EACD;;AAtDkC"}