{"version":3,"file":"xviz-pose-builder.js","names":["XVIZBaseBuilder","CATEGORY","XVIZPoseBuilder","constructor","props","category","POSE","_poses","mapOrigin","longitude","latitude","altitude","_map_origin","position","x","y","z","_position","orientation","roll","pitch","yaw","_orientation","timestamp","_timestamp","_flush","data","map_origin","_streamId","reset","getData","poses"],"sources":["../../../src/builders/xviz-pose-builder.js"],"sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable camelcase */\nimport XVIZBaseBuilder from './xviz-base-builder';\nimport {CATEGORY} from './constant';\n\nexport default class XVIZPoseBuilder extends XVIZBaseBuilder {\n  constructor(props) {\n    super({\n      ...props,\n      category: CATEGORY.POSE\n    });\n\n    this._poses = null;\n  }\n\n  mapOrigin(longitude, latitude, altitude) {\n    this._map_origin = {longitude, latitude, altitude};\n    return this;\n  }\n\n  position(x, y, z) {\n    this._position = [x, y, z];\n    return this;\n  }\n\n  orientation(roll, pitch, yaw) {\n    this._orientation = [roll, pitch, yaw];\n    return this;\n  }\n\n  timestamp(timestamp) {\n    this._timestamp = timestamp;\n    return this;\n  }\n\n  _flush() {\n    if (!this._poses) {\n      this._poses = {};\n    }\n\n    const data = {};\n    if (this._timestamp) {\n      data.timestamp = this._timestamp;\n    }\n\n    if (this._map_origin) {\n      data.map_origin = this._map_origin;\n    }\n\n    if (this._position) {\n      data.position = this._position;\n    }\n\n    if (this._orientation) {\n      data.orientation = this._orientation;\n    }\n\n    this._poses[this._streamId] = data;\n  }\n\n  reset() {\n    super.reset();\n\n    this._timestamp = null;\n    this._map_origin = null;\n    this._position = null;\n    this._orientation = null;\n  }\n\n  getData() {\n    if (this._streamId) {\n      this._flush();\n    }\n\n    return {\n      poses: this._poses\n    };\n  }\n}\n"],"mappings":";;;;;;AAeA,OAAOA,eAAP,MAA4B,qBAA5B;AACA,SAAQC,QAAR,QAAuB,YAAvB;AAEA,eAAe,MAAMC,eAAN,SAA8BF,eAA9B,CAA8C;EAC3DG,WAAW,CAACC,KAAD,EAAQ;IACjB,sCACKA,KADL;MAEEC,QAAQ,EAAEJ,QAAQ,CAACK;IAFrB;IAKA,KAAKC,MAAL,GAAc,IAAd;EACD;;EAEDC,SAAS,CAACC,SAAD,EAAYC,QAAZ,EAAsBC,QAAtB,EAAgC;IACvC,KAAKC,WAAL,GAAmB;MAACH,SAAD;MAAYC,QAAZ;MAAsBC;IAAtB,CAAnB;IACA,OAAO,IAAP;EACD;;EAEDE,QAAQ,CAACC,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAU;IAChB,KAAKC,SAAL,GAAiB,CAACH,CAAD,EAAIC,CAAJ,EAAOC,CAAP,CAAjB;IACA,OAAO,IAAP;EACD;;EAEDE,WAAW,CAACC,IAAD,EAAOC,KAAP,EAAcC,GAAd,EAAmB;IAC5B,KAAKC,YAAL,GAAoB,CAACH,IAAD,EAAOC,KAAP,EAAcC,GAAd,CAApB;IACA,OAAO,IAAP;EACD;;EAEDE,SAAS,CAACA,SAAD,EAAY;IACnB,KAAKC,UAAL,GAAkBD,SAAlB;IACA,OAAO,IAAP;EACD;;EAEDE,MAAM,GAAG;IACP,IAAI,CAAC,KAAKlB,MAAV,EAAkB;MAChB,KAAKA,MAAL,GAAc,EAAd;IACD;;IAED,MAAMmB,IAAI,GAAG,EAAb;;IACA,IAAI,KAAKF,UAAT,EAAqB;MACnBE,IAAI,CAACH,SAAL,GAAiB,KAAKC,UAAtB;IACD;;IAED,IAAI,KAAKZ,WAAT,EAAsB;MACpBc,IAAI,CAACC,UAAL,GAAkB,KAAKf,WAAvB;IACD;;IAED,IAAI,KAAKK,SAAT,EAAoB;MAClBS,IAAI,CAACb,QAAL,GAAgB,KAAKI,SAArB;IACD;;IAED,IAAI,KAAKK,YAAT,EAAuB;MACrBI,IAAI,CAACR,WAAL,GAAmB,KAAKI,YAAxB;IACD;;IAED,KAAKf,MAAL,CAAY,KAAKqB,SAAjB,IAA8BF,IAA9B;EACD;;EAEDG,KAAK,GAAG;IACN,MAAMA,KAAN;IAEA,KAAKL,UAAL,GAAkB,IAAlB;IACA,KAAKZ,WAAL,GAAmB,IAAnB;IACA,KAAKK,SAAL,GAAiB,IAAjB;IACA,KAAKK,YAAL,GAAoB,IAApB;EACD;;EAEDQ,OAAO,GAAG;IACR,IAAI,KAAKF,SAAT,EAAoB;MAClB,KAAKH,MAAL;IACD;;IAED,OAAO;MACLM,KAAK,EAAE,KAAKxB;IADP,CAAP;EAGD;;AAxE0D"}