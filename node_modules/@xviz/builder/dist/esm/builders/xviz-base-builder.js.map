{"version":3,"file":"xviz-base-builder.js","names":["XVIZBaseBuilder","validator","category","metadata","_streamId","_category","_metadata","_validator","streamId","_flush","Error","hasProp","matchMetadata","msg","warn","error","prop","propSetOnce"],"sources":["../../../src/builders/xviz-base-builder.js"],"sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* XVIZBaseBuilder provides validation and category information\n * shared across all builders.\n */\nexport default class XVIZBaseBuilder {\n  constructor({validator, category, metadata}) {\n    this._streamId = null;\n    this._category = category;\n    this._metadata = metadata;\n\n    this._validator = validator;\n  }\n\n  stream(streamId) {\n    if (this._streamId) {\n      this._flush();\n    }\n\n    this._streamId = streamId;\n    return this;\n  }\n\n  getStreamId() {\n    return this._streamId;\n  }\n\n  getCategory() {\n    return this._category;\n  }\n\n  getMetadata() {\n    return this._metadata;\n  }\n\n  _flush() {\n    throw new Error('Derived class must implement the \"_flush()\" method.');\n  }\n\n  _reset() {\n    this._category = null;\n  }\n\n  _validate() {\n    this._validator.hasProp(this, '_streamId');\n    this._validator.hasProp(this, '_category');\n    this._validator.matchMetadata(this);\n  }\n\n  validateWarn(msg) {\n    this._validator.warn(msg);\n  }\n\n  validateError(msg) {\n    this._validator.error(msg);\n  }\n\n  validatePropSetOnce(prop) {\n    this._validator.propSetOnce(this, prop);\n  }\n}\n"],"mappings":";;;IAiBqBA,e;EACnB,+BAA6C;IAAA,IAAhCC,SAAgC,QAAhCA,SAAgC;IAAA,IAArBC,QAAqB,QAArBA,QAAqB;IAAA,IAAXC,QAAW,QAAXA,QAAW;;IAAA;;IAC3C,KAAKC,SAAL,GAAiB,IAAjB;IACA,KAAKC,SAAL,GAAiBH,QAAjB;IACA,KAAKI,SAAL,GAAiBH,QAAjB;IAEA,KAAKI,UAAL,GAAkBN,SAAlB;EACD;;;;WAED,gBAAOO,QAAP,EAAiB;MACf,IAAI,KAAKJ,SAAT,EAAoB;QAClB,KAAKK,MAAL;MACD;;MAED,KAAKL,SAAL,GAAiBI,QAAjB;MACA,OAAO,IAAP;IACD;;;WAED,uBAAc;MACZ,OAAO,KAAKJ,SAAZ;IACD;;;WAED,uBAAc;MACZ,OAAO,KAAKC,SAAZ;IACD;;;WAED,uBAAc;MACZ,OAAO,KAAKC,SAAZ;IACD;;;WAED,kBAAS;MACP,MAAM,IAAII,KAAJ,CAAU,qDAAV,CAAN;IACD;;;WAED,kBAAS;MACP,KAAKL,SAAL,GAAiB,IAAjB;IACD;;;WAED,qBAAY;MACV,KAAKE,UAAL,CAAgBI,OAAhB,CAAwB,IAAxB,EAA8B,WAA9B;;MACA,KAAKJ,UAAL,CAAgBI,OAAhB,CAAwB,IAAxB,EAA8B,WAA9B;;MACA,KAAKJ,UAAL,CAAgBK,aAAhB,CAA8B,IAA9B;IACD;;;WAED,sBAAaC,GAAb,EAAkB;MAChB,KAAKN,UAAL,CAAgBO,IAAhB,CAAqBD,GAArB;IACD;;;WAED,uBAAcA,GAAd,EAAmB;MACjB,KAAKN,UAAL,CAAgBQ,KAAhB,CAAsBF,GAAtB;IACD;;;WAED,6BAAoBG,IAApB,EAA0B;MACxB,KAAKT,UAAL,CAAgBU,WAAhB,CAA4B,IAA5B,EAAkCD,IAAlC;IACD;;;;;;SAtDkBhB,e"}