{"version":3,"file":"xviz-pose-builder.js","names":["XVIZBaseBuilder","CATEGORY","XVIZPoseBuilder","props","category","POSE","_poses","longitude","latitude","altitude","_map_origin","x","y","z","_position","roll","pitch","yaw","_orientation","timestamp","_timestamp","data","map_origin","position","orientation","_streamId","_flush","poses"],"sources":["../../../src/builders/xviz-pose-builder.js"],"sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable camelcase */\nimport XVIZBaseBuilder from './xviz-base-builder';\nimport {CATEGORY} from './constant';\n\nexport default class XVIZPoseBuilder extends XVIZBaseBuilder {\n  constructor(props) {\n    super({\n      ...props,\n      category: CATEGORY.POSE\n    });\n\n    this._poses = null;\n  }\n\n  mapOrigin(longitude, latitude, altitude) {\n    this._map_origin = {longitude, latitude, altitude};\n    return this;\n  }\n\n  position(x, y, z) {\n    this._position = [x, y, z];\n    return this;\n  }\n\n  orientation(roll, pitch, yaw) {\n    this._orientation = [roll, pitch, yaw];\n    return this;\n  }\n\n  timestamp(timestamp) {\n    this._timestamp = timestamp;\n    return this;\n  }\n\n  _flush() {\n    if (!this._poses) {\n      this._poses = {};\n    }\n\n    const data = {};\n    if (this._timestamp) {\n      data.timestamp = this._timestamp;\n    }\n\n    if (this._map_origin) {\n      data.map_origin = this._map_origin;\n    }\n\n    if (this._position) {\n      data.position = this._position;\n    }\n\n    if (this._orientation) {\n      data.orientation = this._orientation;\n    }\n\n    this._poses[this._streamId] = data;\n  }\n\n  reset() {\n    super.reset();\n\n    this._timestamp = null;\n    this._map_origin = null;\n    this._position = null;\n    this._orientation = null;\n  }\n\n  getData() {\n    if (this._streamId) {\n      this._flush();\n    }\n\n    return {\n      poses: this._poses\n    };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAeA,OAAOA,eAAP,MAA4B,qBAA5B;AACA,SAAQC,QAAR,QAAuB,YAAvB;;IAEqBC,e;;;;;EACnB,yBAAYC,KAAZ,EAAmB;IAAA;;IAAA;;IACjB,0DACKA,KADL;MAEEC,QAAQ,EAAEH,QAAQ,CAACI;IAFrB;IAKA,MAAKC,MAAL,GAAc,IAAd;IANiB;EAOlB;;;;WAED,mBAAUC,SAAV,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;MACvC,KAAKC,WAAL,GAAmB;QAACH,SAAS,EAATA,SAAD;QAAYC,QAAQ,EAARA,QAAZ;QAAsBC,QAAQ,EAARA;MAAtB,CAAnB;MACA,OAAO,IAAP;IACD;;;WAED,kBAASE,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkB;MAChB,KAAKC,SAAL,GAAiB,CAACH,CAAD,EAAIC,CAAJ,EAAOC,CAAP,CAAjB;MACA,OAAO,IAAP;IACD;;;WAED,qBAAYE,IAAZ,EAAkBC,KAAlB,EAAyBC,GAAzB,EAA8B;MAC5B,KAAKC,YAAL,GAAoB,CAACH,IAAD,EAAOC,KAAP,EAAcC,GAAd,CAApB;MACA,OAAO,IAAP;IACD;;;WAED,mBAAUE,UAAV,EAAqB;MACnB,KAAKC,UAAL,GAAkBD,UAAlB;MACA,OAAO,IAAP;IACD;;;WAED,kBAAS;MACP,IAAI,CAAC,KAAKb,MAAV,EAAkB;QAChB,KAAKA,MAAL,GAAc,EAAd;MACD;;MAED,IAAMe,IAAI,GAAG,EAAb;;MACA,IAAI,KAAKD,UAAT,EAAqB;QACnBC,IAAI,CAACF,SAAL,GAAiB,KAAKC,UAAtB;MACD;;MAED,IAAI,KAAKV,WAAT,EAAsB;QACpBW,IAAI,CAACC,UAAL,GAAkB,KAAKZ,WAAvB;MACD;;MAED,IAAI,KAAKI,SAAT,EAAoB;QAClBO,IAAI,CAACE,QAAL,GAAgB,KAAKT,SAArB;MACD;;MAED,IAAI,KAAKI,YAAT,EAAuB;QACrBG,IAAI,CAACG,WAAL,GAAmB,KAAKN,YAAxB;MACD;;MAED,KAAKZ,MAAL,CAAY,KAAKmB,SAAjB,IAA8BJ,IAA9B;IACD;;;WAED,iBAAQ;MACN;;MAEA,KAAKD,UAAL,GAAkB,IAAlB;MACA,KAAKV,WAAL,GAAmB,IAAnB;MACA,KAAKI,SAAL,GAAiB,IAAjB;MACA,KAAKI,YAAL,GAAoB,IAApB;IACD;;;WAED,mBAAU;MACR,IAAI,KAAKO,SAAT,EAAoB;QAClB,KAAKC,MAAL;MACD;;MAED,OAAO;QACLC,KAAK,EAAE,KAAKrB;MADP,CAAP;IAGD;;;;EAxE0CN,e;;SAAxBE,e"}