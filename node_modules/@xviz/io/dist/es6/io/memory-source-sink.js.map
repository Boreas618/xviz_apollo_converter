{"version":3,"file":"memory-source-sink.js","names":["MemorySourceSink","constructor","data","Map","readSync","name","get","writeSync","ArrayBuffer","isView","length","buffer","set","existsSync","has","close","entries"],"sources":["../../../src/io/memory-source-sink.js"],"sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/**\n * Memory storage for XVIZ data\n */\nexport class MemorySourceSink {\n  constructor() {\n    this.data = new Map();\n  }\n\n  readSync(name) {\n    return this.data.get(name);\n  }\n\n  writeSync(name, data) {\n    // Save the underlying arrayBuffer not the TypedArray\n    // because when reading we should have an ArrayBuffer\n    // and the consumer should make the Type decision\n    if (ArrayBuffer.isView(data) && data.length && data.buffer) {\n      this.data.set(name, data.buffer);\n    } else {\n      this.data.set(name, data);\n    }\n  }\n\n  existsSync(name) {\n    return this.data.has(name);\n  }\n\n  close() {}\n\n  entries() {\n    return this.data.entries();\n  }\n\n  has(name) {\n    return this.data.has(name);\n  }\n}\n"],"mappings":"AAgBA,OAAO,MAAMA,gBAAN,CAAuB;EAC5BC,WAAW,GAAG;IACZ,KAAKC,IAAL,GAAY,IAAIC,GAAJ,EAAZ;EACD;;EAEDC,QAAQ,CAACC,IAAD,EAAO;IACb,OAAO,KAAKH,IAAL,CAAUI,GAAV,CAAcD,IAAd,CAAP;EACD;;EAEDE,SAAS,CAACF,IAAD,EAAOH,IAAP,EAAa;IAIpB,IAAIM,WAAW,CAACC,MAAZ,CAAmBP,IAAnB,KAA4BA,IAAI,CAACQ,MAAjC,IAA2CR,IAAI,CAACS,MAApD,EAA4D;MAC1D,KAAKT,IAAL,CAAUU,GAAV,CAAcP,IAAd,EAAoBH,IAAI,CAACS,MAAzB;IACD,CAFD,MAEO;MACL,KAAKT,IAAL,CAAUU,GAAV,CAAcP,IAAd,EAAoBH,IAApB;IACD;EACF;;EAEDW,UAAU,CAACR,IAAD,EAAO;IACf,OAAO,KAAKH,IAAL,CAAUY,GAAV,CAAcT,IAAd,CAAP;EACD;;EAEDU,KAAK,GAAG,CAAE;;EAEVC,OAAO,GAAG;IACR,OAAO,KAAKd,IAAL,CAAUc,OAAV,EAAP;EACD;;EAEDF,GAAG,CAACT,IAAD,EAAO;IACR,OAAO,KAAKH,IAAL,CAAUY,GAAV,CAAcT,IAAd,CAAP;EACD;;AAhC2B"}