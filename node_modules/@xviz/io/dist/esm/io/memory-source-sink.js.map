{"version":3,"file":"memory-source-sink.js","names":["MemorySourceSink","data","Map","name","get","ArrayBuffer","isView","length","buffer","set","has","entries"],"sources":["../../../src/io/memory-source-sink.js"],"sourcesContent":["// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/**\n * Memory storage for XVIZ data\n */\nexport class MemorySourceSink {\n  constructor() {\n    this.data = new Map();\n  }\n\n  readSync(name) {\n    return this.data.get(name);\n  }\n\n  writeSync(name, data) {\n    // Save the underlying arrayBuffer not the TypedArray\n    // because when reading we should have an ArrayBuffer\n    // and the consumer should make the Type decision\n    if (ArrayBuffer.isView(data) && data.length && data.buffer) {\n      this.data.set(name, data.buffer);\n    } else {\n      this.data.set(name, data);\n    }\n  }\n\n  existsSync(name) {\n    return this.data.has(name);\n  }\n\n  close() {}\n\n  entries() {\n    return this.data.entries();\n  }\n\n  has(name) {\n    return this.data.has(name);\n  }\n}\n"],"mappings":";;AAgBA,WAAaA,gBAAb;EACE,4BAAc;IAAA;;IACZ,KAAKC,IAAL,GAAY,IAAIC,GAAJ,EAAZ;EACD;;EAHH;IAAA;IAAA,OAKE,kBAASC,IAAT,EAAe;MACb,OAAO,KAAKF,IAAL,CAAUG,GAAV,CAAcD,IAAd,CAAP;IACD;EAPH;IAAA;IAAA,OASE,mBAAUA,IAAV,EAAgBF,IAAhB,EAAsB;MAIpB,IAAII,WAAW,CAACC,MAAZ,CAAmBL,IAAnB,KAA4BA,IAAI,CAACM,MAAjC,IAA2CN,IAAI,CAACO,MAApD,EAA4D;QAC1D,KAAKP,IAAL,CAAUQ,GAAV,CAAcN,IAAd,EAAoBF,IAAI,CAACO,MAAzB;MACD,CAFD,MAEO;QACL,KAAKP,IAAL,CAAUQ,GAAV,CAAcN,IAAd,EAAoBF,IAApB;MACD;IACF;EAlBH;IAAA;IAAA,OAoBE,oBAAWE,IAAX,EAAiB;MACf,OAAO,KAAKF,IAAL,CAAUS,GAAV,CAAcP,IAAd,CAAP;IACD;EAtBH;IAAA;IAAA,OAwBE,iBAAQ,CAAE;EAxBZ;IAAA;IAAA,OA0BE,mBAAU;MACR,OAAO,KAAKF,IAAL,CAAUU,OAAV,EAAP;IACD;EA5BH;IAAA;IAAA,OA8BE,aAAIR,IAAJ,EAAU;MACR,OAAO,KAAKF,IAAL,CAAUS,GAAV,CAAcP,IAAd,CAAP;IACD;EAhCH;;EAAA;AAAA"}